# ğŸ”„ æ¨¡æ¿åŒæ­¥å®Œæ•´æŒ‡å—

ä»æ¨¡æ¿åŒæ­¥æ›´æ–°åˆ°ä½ çš„é¡¹ç›®çš„å®Œæ•´æ“ä½œæŒ‡å—ã€‚

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å®Œæ•´å·¥ä½œæµç¨‹](#å®Œæ•´å·¥ä½œæµç¨‹)
- [å¤„ç†å†²çª](#å¤„ç†å†²çª)
- [å¸¸è§åœºæ™¯](#å¸¸è§åœºæ™¯)
- [é—®é¢˜æ’æŸ¥](#é—®é¢˜æ’æŸ¥)

---

## âš¡ å¿«é€Ÿå¼€å§‹

**ç®€å•æ–¹å¼**ï¼ˆç›´æ¥åˆå¹¶ - é»˜è®¤ï¼‰ï¼š

```bash
# ç›´æ¥åˆå¹¶åˆ°å½“å‰åˆ†æ”¯
./scripts/sync-template.sh

# æµ‹è¯•ä½ çš„åº”ç”¨
pnpm install
pnpm dev

# ä¸€åˆ‡æ­£å¸¸å°±æ¨é€
git push
```

**é«˜çº§æ–¹å¼**ï¼ˆå¸¦å®¡æŸ¥ï¼‰ï¼š

```bash
# åˆ›å»ºæ–°åˆ†æ”¯è¿›è¡Œå®‰å…¨åˆå¹¶
./scripts/sync-template.sh --branch

# å®¡æŸ¥å’Œæµ‹è¯•
git log --oneline -10
pnpm dev

# åˆå¹¶å›ä¸»åˆ†æ”¯
git checkout main
git merge chore/sync-template-YYYYMMDD-HHMMSS

# æ¸…ç†
git branch -d chore/sync-template-YYYYMMDD-HHMMSS
```

---

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

æ¨¡æ¿åŒæ­¥è„šæœ¬æ”¯æŒä¸¤ç§æ¨¡å¼ï¼š

### æ¨¡å¼ 1ï¼šç›´æ¥åˆå¹¶ï¼ˆé»˜è®¤ - ç®€å•å¿«é€Ÿï¼‰

**é€‚ç”¨äºï¼š** å¿«é€Ÿæ›´æ–°ã€ä¸ªäººé¡¹ç›®ã€ä¿¡ä»»æ¨¡æ¿å˜æ›´æ—¶

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
./scripts/sync-template.sh
```

**ä¼šå‘ç”Ÿä»€ä¹ˆï¼š**
1. è„šæœ¬æ£€æµ‹å½“å‰åˆ†æ”¯ï¼ˆä¾‹å¦‚ `main`ï¼‰
2. æ‹‰å–æœ€æ–°æ¨¡æ¿æ›´æ–°
3. å±•ç¤ºå°†è¦å‘ç”Ÿçš„å˜æ›´
4. è¦æ±‚ç¡®è®¤
5. ç›´æ¥åˆå¹¶åˆ°å½“å‰åˆ†æ”¯
6. æŒ‡å¯¼ä½ è¿›è¡Œæµ‹è¯•

**åŒæ­¥åï¼š**
```bash
# å®‰è£…æ–°ä¾èµ–
pnpm install
uv sync

# æµ‹è¯•åº”ç”¨
pnpm dev
pnpm build

# æ¨é€åˆ°è¿œç¨‹
git push
```

**å¦‚æœå‡ºé”™äº†ï¼š**
```bash
# æ’¤é”€åˆå¹¶ï¼ˆå°å¿ƒä½¿ç”¨ï¼ï¼‰
git reset --hard HEAD~1

# æˆ–æŸ¥æ‰¾å¹¶æ¢å¤ä¹‹å‰çš„çŠ¶æ€
git reflog
```

---

### æ¨¡å¼ 2ï¼šåˆ†æ”¯æ¨¡å¼ï¼ˆé«˜çº§ - å®‰å…¨å¯å®¡æŸ¥ï¼‰

**é€‚ç”¨äºï¼š** å›¢é˜Ÿé¡¹ç›®ã€é‡å¤§æ¨¡æ¿æ›´æ–°ã€éœ€è¦ä»”ç»†å®¡æŸ¥æ—¶

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
./scripts/sync-template.sh --branch
```

**ä¼šå‘ç”Ÿä»€ä¹ˆï¼š**
1. è„šæœ¬æ£€æµ‹å½“å‰åˆ†æ”¯ï¼ˆä¾‹å¦‚ `main`ï¼‰
2. åˆ›å»ºæ–°åˆ†æ”¯ï¼š`chore/sync-template-20251209-143000`
3. åˆ‡æ¢åˆ°æ–°åˆ†æ”¯
4. æ‹‰å–å¹¶åˆå¹¶æ¨¡æ¿æ›´æ–°
5. è®©ä½ åœ¨éš”ç¦»ç¯å¢ƒä¸­å®¡æŸ¥å’Œæµ‹è¯•

**è¯¦ç»†æ­¥éª¤ï¼š**

#### æ­¥éª¤ 1ï¼šå®¡æŸ¥å˜æ›´

```bash
# æŸ¥çœ‹æäº¤å†å²
git log --oneline -10

# æŸ¥çœ‹æ–‡ä»¶å˜æ›´
git diff main

# æŸ¥çœ‹ç‰¹å®šæ–‡ä»¶
git diff main -- package.json
git diff main -- src/app/

# æŸ¥çœ‹å˜æ›´æ–‡ä»¶åˆ—è¡¨
git diff --name-status main
```

#### æ­¥éª¤ 2ï¼šæµ‹è¯•åº”ç”¨

```bash
# å®‰è£…ä¾èµ–
pnpm install
uv sync

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# è¿è¡Œæµ‹è¯•
pnpm test

# æ£€æŸ¥æ„å»º
pnpm build
```

**æµ‹è¯•æ¸…å•ï¼š**
- [ ] åº”ç”¨æ­£å¸¸å¯åŠ¨ï¼Œæ— æŠ¥é”™
- [ ] æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ§åˆ¶å°æ— é”™è¯¯
- [ ] æµ‹è¯•é€šè¿‡
- [ ] æ„å»ºæˆåŠŸ

#### æ­¥éª¤ 3ï¼šåˆå¹¶å›ä¸»åˆ†æ”¯

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼š

```bash
# åˆ‡å›ä¸»åˆ†æ”¯
git checkout main

# åˆå¹¶åŒæ­¥åˆ†æ”¯
git merge chore/sync-template-20251209-143000
```

#### æ­¥éª¤ 4ï¼šæ¸…ç†

```bash
# åˆ é™¤åŒæ­¥åˆ†æ”¯
git branch -d chore/sync-template-20251209-143000

# æ¨é€åˆ°è¿œç¨‹
git push origin main
```

---

## âš ï¸ å¤„ç†å†²çª

### åŒæ­¥æ—¶å‘ç”Ÿå†²çª

è„šæœ¬ä¼šåœæ­¢å¹¶æ˜¾ç¤ºï¼š

```
âœ— Merge conflicts detected

Please resolve conflicts manually:
  1. Fix conflicts in the listed files
  2. Run: git add <resolved-files>
  3. Run: git commit
  4. Continue with the next steps shown above
```

**å¦‚ä½•è§£å†³ï¼š**

1. **æŸ¥çœ‹å“ªäº›æ–‡ä»¶æœ‰å†²çªï¼š**
   ```bash
   git status
   ```

2. **åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€å†²çªæ–‡ä»¶ã€‚** å¯»æ‰¾å†²çªæ ‡è®°ï¼š
   ```
   <<<<<<< HEAD
   ä½ çš„ä»£ç 
   =======
   æ¨¡æ¿ä»£ç 
   >>>>>>> template/master
   ```

3. **è§£å†³æ¯ä¸ªå†²çªï¼š**
   - ä¿ç•™ä½ çš„ä¿®æ”¹
   - ä¿ç•™æ¨¡æ¿ä¿®æ”¹
   - æˆ–åˆå¹¶ä¸¤è€…ï¼ˆæœ€å¸¸è§ï¼‰

4. **æ ‡è®°ä¸ºå·²è§£å†³ï¼š**
   ```bash
   git add <å·²è§£å†³çš„æ–‡ä»¶>
   ```

5. **å®Œæˆåˆå¹¶ï¼š**
   ```bash
   git commit
   ```

6. **ç»§ç»­æµ‹è¯•ï¼ˆæ­¥éª¤ 3ï¼‰**

---

### åˆå¹¶åˆ°ä¸»åˆ†æ”¯æ—¶å‘ç”Ÿå†²çª

```bash
git checkout main
git merge chore/sync-template-20251209-143000
# å†²çªï¼è‡ªåŠ¨åˆå¹¶å¤±è´¥
```

**è§£å†³æ–¹æ³•ç›¸åŒï¼š**

1. æŸ¥çœ‹å†²çªï¼š`git status`
2. ä¿®å¤æ–‡ä»¶ä¸­çš„å†²çª
3. æš‚å­˜å·²è§£å†³çš„æ–‡ä»¶ï¼š`git add <æ–‡ä»¶>`
4. å®Œæˆåˆå¹¶ï¼š`git commit`

---

## ğŸ¯ å¸¸è§åœºæ™¯

### åœºæ™¯ 1ï¼š"æˆ‘æƒ³å¿«é€Ÿç®€å•åœ°æ›´æ–°"

ä½¿ç”¨é»˜è®¤æ¨¡å¼ï¼ˆç›´æ¥åˆå¹¶ï¼‰ï¼š

```bash
./scripts/sync-template.sh
```

è¿™æ˜¯æœ€ç®€å•çš„æ–¹å¼ - ç›´æ¥åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚

---

### åœºæ™¯ 2ï¼š"æˆ‘æƒ³åˆ›å»º Pull Request ä¾›å›¢é˜Ÿå®¡æŸ¥"

é€‚åˆå›¢é˜Ÿåä½œæµç¨‹ - ä½¿ç”¨åˆ†æ”¯æ¨¡å¼ï¼š

```bash
# 1. ä½¿ç”¨ --branch å‚æ•°è¿è¡ŒåŒæ­¥è„šæœ¬
./scripts/sync-template.sh --branch

# 2. å®¡æŸ¥å’Œæµ‹è¯•
pnpm dev

# 3. æ¨é€åŒæ­¥åˆ†æ”¯åˆ°è¿œç¨‹
git push -u origin chore/sync-template-20251209-143000

# 4. åˆ° GitHub/GitLab åˆ›å»º Pull Request
# 5. è¯·æ±‚å›¢é˜Ÿå®¡æŸ¥
# 6. å®¡æŸ¥é€šè¿‡ååˆå¹¶ PR
```

---

### åœºæ™¯ 3ï¼š"æˆ‘ä¸å–œæ¬¢è¿™äº›å˜æ›´ï¼Œæ”¾å¼ƒï¼"

**å¦‚æœä½¿ç”¨é»˜è®¤æ¨¡å¼ï¼ˆå·²åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼‰ï¼š**

```bash
# æ’¤é”€åˆå¹¶ï¼ˆå¦‚æœè¿˜æ²¡æ¨é€ï¼‰
git reset --hard HEAD~1

# å¦‚æœå·²ç»æ¨é€ï¼Œåˆ›å»ºå›æ»šæäº¤
git revert -m 1 HEAD
```

âš ï¸ **è­¦å‘Šï¼š** ä½¿ç”¨ `reset --hard` è¦å°å¿ƒ - å®ƒä¼šæ°¸ä¹…åˆ é™¤æäº¤ã€‚

**å¦‚æœä½¿ç”¨åˆ†æ”¯æ¨¡å¼ï¼ˆè¿˜åœ¨åŒæ­¥åˆ†æ”¯ä¸Šï¼‰ï¼š**

```bash
# åˆ‡å›ä¸»åˆ†æ”¯
git checkout main

# åˆ é™¤åŒæ­¥åˆ†æ”¯
git branch -D chore/sync-template-20251209-143000
```

åˆ†æ”¯æ¨¡å¼æ›´å®‰å…¨ï¼

---

### åœºæ™¯ 4ï¼š"æˆ‘åªæƒ³åŒæ­¥ç‰¹å®šæ–‡ä»¶"

è¿è¡ŒåŒæ­¥è„šæœ¬åï¼š

```bash
# åœ¨åŒæ­¥åˆ†æ”¯ä¸Šï¼Œé€‰æ‹©æ€§æå–å˜æ›´
git checkout main
git checkout chore/sync-template-20251209-143000 -- path/to/file.ts

# æˆ–ä½¿ç”¨äº¤äº’å¼æš‚å­˜
git add -p
```

---

## ğŸ”§ é—®é¢˜æ’æŸ¥

### é—®é¢˜ï¼š"fatal: refusing to merge unrelated histories"

**è§£å†³æ–¹æ¡ˆï¼š** è„šæœ¬å·²ä½¿ç”¨ `--allow-unrelated-histories`ã€‚å¦‚æœæ‰‹åŠ¨åŒæ­¥ï¼š

```bash
git merge template/master --allow-unrelated-histories
```

---

### é—®é¢˜ï¼š"error: Your local changes would be overwritten"

**è§£å†³æ–¹æ¡ˆï¼š** å…ˆæš‚å­˜æˆ–æäº¤ä½ çš„å˜æ›´ï¼š

```bash
# æš‚å­˜å˜æ›´
git stash
./scripts/sync-template.sh
git stash pop

# æˆ–æäº¤å˜æ›´
git add .
git commit -m "WIP: before template sync"
./scripts/sync-template.sh
```

---

### é—®é¢˜ï¼š"æˆ‘åœ¨è§£å†³å†²çªæ—¶ä¸å°å¿ƒåˆ é™¤äº†æ–‡ä»¶"

**è§£å†³æ–¹æ¡ˆï¼š** ä»åŒæ­¥åˆ†æ”¯æ¢å¤ï¼š

```bash
git checkout chore/sync-template-20251209-143000 -- path/to/file
```

---

### é—®é¢˜ï¼š"åŒæ­¥åˆ†æ”¯å†²çªå¤ªå¤šäº†"

**è§£å†³æ–¹æ¡ˆï¼š** æ‰‹åŠ¨é€‰æ‹©æ€§åˆå¹¶ï¼š

```bash
# é‡æ–°å¼€å§‹
git checkout main

# æ‰‹åŠ¨åˆå¹¶ç‰¹å®šæäº¤
git cherry-pick <commit-hash>

# æˆ–æ‰‹åŠ¨å¤åˆ¶æ–‡ä»¶
git show template/master:path/to/file > path/to/file
```

---

## ğŸ“š å¯è§†åŒ–å·¥ä½œæµç¨‹å›¾

```
ä½ çš„é¡¹ç›® (main)
    â”‚
    â”œâ”€â”€â”€ ./scripts/sync-template.sh
    â”‚
    â”œâ”€â”€â”€ åˆ›å»º: chore/sync-template-20251209-143000
    â”‚              â”‚
    â”‚              â”œâ”€â”€â”€ æ¨¡æ¿æ›´æ–°åˆå¹¶åˆ°è¿™é‡Œ
    â”‚              â”œâ”€â”€â”€ å®¡æŸ¥å˜æ›´
    â”‚              â”œâ”€â”€â”€ æµ‹è¯•åº”ç”¨
    â”‚              â””â”€â”€â”€ ä¸€åˆ‡æ­£å¸¸? âœ“
    â”‚                       â”‚
    â”‚                       â”œâ”€â”€â”€ git checkout main
    â”‚                       â”œâ”€â”€â”€ git merge chore/sync-template-...
    â”‚                       â””â”€â”€â”€ git branch -d chore/sync-template-...
    â”‚
    â””â”€â”€â”€ main (å·²æ›´æ–°æ¨¡æ¿å˜æ›´) âœ“
```

---

## ğŸ“ æœ€ä½³å®è·µ

1. **åˆå¹¶åˆ°ä¸»åˆ†æ”¯å‰åŠ¡å¿…æµ‹è¯•**
   - è¿è¡Œå¼€å‘æœåŠ¡å™¨
   - æ£€æŸ¥æ‰€æœ‰åŠŸèƒ½
   - è¿è¡Œæµ‹è¯•å’Œä»£ç æ£€æŸ¥

2. **å›¢é˜Ÿé¡¹ç›®ä½¿ç”¨ PR å·¥ä½œæµ**
   - ä»åŒæ­¥åˆ†æ”¯åˆ›å»º PR
   - è¯·æ±‚ä»£ç å®¡æŸ¥
   - å®¡æŸ¥é€šè¿‡ååˆå¹¶

3. **å®šæœŸåŒæ­¥**
   - æ¯æœˆæˆ–æ¯å­£åº¦
   - æ¨¡æ¿é‡å¤§å‘å¸ƒå
   - å¼€å§‹æ–°åŠŸèƒ½å‰

4. **è®°å½•è‡ªå®šä¹‰ä¿®æ”¹**
   - æ·»åŠ æ³¨é‡Šè¯´æ˜è‡ªå®šä¹‰å†…å®¹
   - ç»´æŠ¤å˜æ›´æ—¥å¿—ï¼ˆCHANGELOGï¼‰
   - ä¾¿äºæœªæ¥åŒæ­¥

5. **é‡å¤§åŒæ­¥å‰å¤‡ä»½**
   - åˆ›å»ºå¤‡ä»½åˆ†æ”¯ï¼š`git branch backup-before-sync`
   - æˆ–æ ‡è®°å½“å‰çŠ¶æ€ï¼š`git tag before-template-sync-2024-12-09`

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

- **è„šæœ¬é—®é¢˜ï¼š** æŸ¥çœ‹ [GitHub Issues](https://github.com/thinkthinking/vibe-working-template/issues)
- **Git å¸®åŠ©ï¼š** [Git æ–‡æ¡£](https://git-scm.com/doc)
- **å†²çªè§£å†³ï¼š** [Atlassian Git æ•™ç¨‹](https://www.atlassian.com/git/tutorials/using-branches/merge-conflicts)

---

<div align="center">
  <p>ç”¨ â¤ï¸ ä¸ºåŸºäºæ¨¡æ¿æ„å»ºé¡¹ç›®çš„å¼€å‘è€…æ‰“é€ </p>
</div>
